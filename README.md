# Guns_tool : BCCKSアップ用・原稿整形アシストツール

![GUNS TOOL](icon.png)

VS_Code拡張機能を利用したガンズ＆ユニバース（旧群雛）@BCCKS用の原稿作成のアシストツールです。

生原稿テキストファイルを提出用に成形します。

BCCKS用の原稿ファイルの表記規則は：
https://www.aiajp.org/2014/01/gunsu_21.html
の「本文（縦書き）の表記」に準拠します。

※個人使用のために作成したものです（ただいまテスト中）。過度に信用なさいませんように＞＜

動作中のエディタの内容を修正しますが、保存はしていないので、原稿修正後はご自身の目でよく確認してから保存するようにしてください。

試しにマーケットプレイスで公開してみました：https://marketplace.visualstudio.com/items?itemName=RASEN-WORKS.guns-tool


---

# 使いかた

 * コマンドパレット（Ctrl+Shift+P）から、以下のコマンドを入力し実行

 ---

# コマンドと各機能
---

## コマンド：「GTool:全修正を一括で行う」
 * guns-tool.applyAllFixes

### 機能：

 * 以下の全てのコマンドを順序立てて一括で実行します（BCCKSルビを青空文庫形式に変換する rubyConvertBccksToAozora は除外）。

### 実行順序：

1. 行頭にスペース挿入（insertSpace）
2. カッコ内末尾の句点削除（removePunctuation）
3. 全角！！、！？等を半角横指定に変換（tateCombiCharacters）
4. ルビ変換：青空→BCCKS（rubyConvertAozoraToBccks）
5. アルファベット単独文字を全角に（fullwidthSingleAlphabet）
6. アルファベット略称（3文字以下）を全角に（fullwidthAcronym）
7. 半角数値（２ケタ）を縦中横に（tateChuyokoTwoDigit）
8. 三点リーダ修正（fixEllipsis）
9. 感嘆符/疑問符の後にスペース挿入（spaceAfterPunct）

### 使用例

コマンドパレット（Ctrl+Shift+P）から「GTool:全修正を一括で行う」を実行すると、上記の9つのコマンドが順番に実行されます。

BCCKSにアップする前のテキスト原稿ファイルに対してこのコマンドを一度実行するだけで一気に基本的整形が行われ（るといいな）たりします。


---
# 以下、個別のコマンド（一括コマンドから呼び出されています）
---

## コマンド：「GTool:行頭にスペース挿入」
 * guns-tool.insertSpace

### 機能
 * 各行の行頭にスペースを挿入する。「や『などの記号の場合はキャンセルされる。

---
## コマンド：「GTool:全角！！、！？等を半角横指定に変換」
 * guns-tool.tateCombiCharacters


### 機能：
* 全角！！、！？等の多重感嘆符を半角に変換し、縦中横指定タグで囲む

### 動作例：
* ！！ → [tcy]!![/tcy]
* ！？ → [tcy]!?[/tcy]
* ？！ → [tcy]?![/tcy]
* ？？ → [tcy]??[/tcy]

---
## コマンド：「GTool:ルビ変換：青空→BCCKS」
 * guns-tool.rubyConvertAozoraToBccks



### 機能：

* 青空文庫形式:|本文《ルビ》 → BCCKS形式: {本文}(ルビ) に変換

#### 動作例

入力：  |爆裂《ばくれつ》

出力：  {爆裂}(ばくれつ)

---
## コマンド：「GTool:ルビ変換2：BCCKS→青空」
 * guns-tool.rubyConvertBccksToAozora

### 機能：

* BCCKS形式: {本文}(ルビ) → 青空文庫形式: |本文《ルビ》 に変換

#### 動作例

入力：  {爆裂}(ばくれつ)

出力：  |爆裂《ばくれつ》


---

## コマンド：「GTool:アルファベット単独文字を全角に」
 * guns-tool.fullwidthSingleAlphabet

### 機能：

 * 日本語文中に単独で現れる半角英数字（例：漢字 A 漢字、漢字 1 漢字、A 漢字）を全角に変換します。

#### 動作例

入力: 漢字 A 漢字 → 出力: 漢字 Ａ 漢字 

入力: 漢字 1 漢字 → 出力: 漢字 １ 漢字

入力: A 漢字 → 出力: Ａ 漢字

（片側のみ日本語でもマッチするケースは今の実装では「両側が日本語」のみにマッチします。）

---

## コマンド：「GTool:アルファベット略称（3文字以下）を全角に」
 * guns-tool.fullwidthAcronym

### 機能：

 * 日本語文中に単独で現れる大文字アルファベット1～3文字の略称（例：漢字 ABC 漢字、漢字 AI 漢字）を全角に変換します。

#### 動作例

入力: 漢字 ABC 漢字 → 出力: 漢字 ＡＢＣ 漢字

入力: 漢字 AI 漢字 → 出力: 漢字 ＡＩ 漢字

入力: 漢字 A 漢字 → 出力: 漢字 Ａ 漢字

---

## コマンド：「GTool:半角数値（２ケタ）を縦中横に」
 * guns-tool.tateChuyokoTwoDigit

### 機能：

 * 日本語文中に単独で現れる2ケタの半角数値を縦中横タグ[tcy]で囲みます。

#### 動作例

入力: 漢字 12 漢字 → 出力: 漢字 [tcy]12[/tcy] 漢字

入力: 漢字 99 漢字 → 出力: 漢字 [tcy]99[/tcy] 漢字

---

## コマンド：「GTool:三点リーダ修正」
 * guns-tool.fixEllipsis

### 機能：

 * 「・・・」「‥」「…」など複数の形式の三点リーダを統一します。これらの文字の1文字以上の連続を「……」（U+2026の2連続）に統一します。

#### 動作例

入力: 漢字・・・漢字 → 出力: 漢字……漢字

入力: 漢字‥漢字 → 出力: 漢字……漢字

入力: 漢字…‥・漢字 → 出力: 漢字……漢字

---

## コマンド：「GTool:感嘆符/疑問符の後にスペース挿入」
 * guns-tool.spaceAfterPunct

### 機能：

 * 感嘆符（！と!）または疑問符（？と?）の直後に空白がない場合、全角スペースを挿入します。
 * ただし、直後の文字が閉じ括弧や閉じ引用符（例：」『）【〉》など）、`[`（縦中横タグ開始）、または別の感嘆符/疑問符である場合は、スペースを挿入しません。

#### 動作例

入力: 彼は叫んだ！世界へ → 出力: 彼は叫んだ！　世界へ

入力: 本当に驚いた！？ → 出力: 本当に驚いた！？（スペース挿入なし）

入力: 「何だ？」と思った → 出力: 「何だ？」と思った（」の前なのでスペース挿入なし）

入力: 驚いた！[tcy]!![/tcy]ね → 出力: 驚いた！[tcy]!![/tcy]ね（[の前なのでスペース挿入なし）


---
---



## Release Notes


### v0.0.1
- Initial set-up (Hello world )
### v0.0.2
- 行頭にスペース挿入 機能を追加
### v0.0.3
- カッコ内末尾の句点削除 機能を追加
### v0.0.4
- 全角！！、！？等を半角横指定に変換 機能を追加
### v0.0.5
- ルビ変換：青空→BCCKS 機能を追加
- ルビ変換2：BCCKS→青空 機能を追加
### v0.0.6
- アルファベット単独文字を全角に 機能を追加
- アルファベット略称（3文字以下）を全角に 機能を追加
- 半角数値（２ケタ）を縦中横に 機能を追加
### v0.0.7
- 三点リーダ修正 機能を追加
### v0.0.8
- 感嘆符後にスペース 機能を追加
### v0.1.0
- 一括実行まで機能を追加
- アイコン、ライセンスファイルの作成、追加
- guns-tool-0.1.0.vsix パッケージを作成。
- マーケットプレイスで公開してみる。

---


## License

This extension is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

**Enjoy!**
